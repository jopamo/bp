# global defaults
Host *
  AddKeysToAgent yes
  IdentitiesOnly yes                 # avoid offering every key from the agent
  ServerAliveInterval 30             # keep long-lived Git connections healthy
  ServerAliveCountMax 3
  TCPKeepAlive yes
  ControlMaster auto                 # connection multiplexing
  ControlPath ~/.ssh/cm-%C
  ControlPersist 10m
  StrictHostKeyChecking ask          # safer than blindly accepting new hosts
  UpdateHostkeys yes                 # trust-on-first-use upgrades to stronger host keys
  HashKnownHosts yes                 # protect known_hosts from leaking hostnames
  IdentityAgent ${SSH_AUTH_SOCK}     # use the running agent if present

# GitHub over SSH on port 443 with PQ KEX preference
Host github.com
  HostName ssh.github.com
  Port 443
  User git
  IdentityFile ~/.ssh/github
  PreferredAuthentications publickey
  KexAlgorithms sntrup761x25519-sha512@openssh.com,sntrup761x25519-sha512,curve25519-sha256

# GitLab over SSH on port 443
Host gitlab.com
  HostName gitlab.com
  Port 443
  User git
  IdentityFile ~/.ssh/gitlab
  PreferredAuthentications publickey
  KexAlgorithms sntrup761x25519-sha512@openssh.com,sntrup761x25519-sha512,curve25519-sha256
