From 26f275502dd28114e78bc098fed81acde1d86d62 Mon Sep 17 00:00:00 2001
From: fivepiece <fivepiece@users.noreply.github.com>
Date: Tue, 20 Jun 2017 22:13:09 +0300
Subject: [PATCH] apply patches from
 http://www.linuxfromscratch.org/lfs/view/development/chapter06/bc.html

---
 bc/fix-libmath_h | 18 +++++++++---------
 configure        |  2 +-
 2 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/bc/fix-libmath_h b/bc/fix-libmath_h
index f973a8c..042c78b 100755
--- a/bc/fix-libmath_h
+++ b/bc/fix-libmath_h
@@ -1,9 +1,9 @@
-ed libmath.h <<EOS-EOS
-1,1s/^/{"/
-1,\$s/\$/",/
-2,\$s/^/"/
-\$,\$d
-\$,\$s/,\$/,0}/
-w
-q
-EOS-EOS
+#! /bin/bash
+sed -e '1   s/^/{"/' \
+    -e     's/$/",/' \
+    -e '2,$ s/^/"/'  \
+    -e   '$ d'       \
+    -i libmath.h
+
+sed -e '$ s/$/0}/' \
+    -i libmath.h
diff --git a/configure b/configure
index 1fa4af4..9c6151d 100755
--- a/configure
+++ b/configure
@@ -5288,7 +5288,7 @@ case $bcle-$bcrl-$LEX in
    ?-?-flex)
 	LEX="flex -I -8" ;;
    ?-y-*)
-	as_fn_error $? "readline works only with flex." "$LINENO" 5 ;;
+	: ;; # as_fn_error $? "readline works only with flex." "$LINENO" 5 ;;
 esac
 
 case $LEX-`uname -s` in
